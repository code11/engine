<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-testing" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">Testing | CODE11 Engine</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://code11.github.io/engine/docs/testing"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Testing | CODE11 Engine"><meta data-rh="true" name="description" content="Engine gives a lot of emphasis to building testable applications. Recommended"><meta data-rh="true" property="og:description" content="Engine gives a lot of emphasis to building testable applications. Recommended"><link data-rh="true" rel="icon" href="/engine/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://code11.github.io/engine/docs/testing"><link data-rh="true" rel="alternate" href="https://code11.github.io/engine/docs/testing" hreflang="en"><link data-rh="true" rel="alternate" href="https://code11.github.io/engine/docs/testing" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://HE3PF3HKN4-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="CODE11 Engine" href="/engine/opensearch.xml"><link rel="stylesheet" href="/engine/assets/css/styles.d35e3562.css">
<script src="/engine/assets/js/runtime~main.4a75de56.js" defer="defer"></script>
<script src="/engine/assets/js/main.2a5169d2.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script>

<script>!function(e,t,a){e[a]=e[a]||[],e[a].push({start:(new Date).getTime(),event:"stg.start"});var n=t.getElementsByTagName("script")[0],i=t.createElement("script");var c=(e.location.href.match("stg_debug")||t.cookie.match("stg_debug"))&&!e.location.href.match("stg_disable_debug");!function(e,a,n){var i="";if(n){var c=new Date;c.setTime(c.getTime()+24*n*60*60*1e3),i="; expires="+c.toUTCString()}t.cookie=e+"="+a+i+"; path=/"}("stg_debug",c?1:"",c?14:-1);var r=[];c&&r.push("stg_debug");var s=r.length>0?"?"+r.join("&"):"";i.async=!0,i.src="https://code11-engine.containers.piwik.pro/63a6c9fb-6da0-4e14-8273-e6c9c78d88ef.js"+s,n.parentNode.insertBefore(i,n),function(t,n,i){t[n]=t[n]||{};for(var c=0;c<i.length;c++)!function(i){t[n][i]=t[n][i]||{},t[n][i].api=t[n][i].api||function(){var t=[].slice.call(arguments,0);"string"==typeof t[0]&&e[a].push({event:n+"."+i+":"+t[0],parameters:[].slice.call(arguments,1)})}}(i[c])}(e,"ppms",["tm","cm"])}(window,document,"dataLayer")</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_N3Nm" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/engine/"><div class="navbar__logo"><img src="/engine/img/logo.png" alt="Code11 Logo" class="themedComponent_aKwg themedComponent--light_QxQP"><img src="/engine/img/logo.png" alt="Code11 Logo" class="themedComponent_aKwg themedComponent--dark_UiuG"></div><b class="navbar__title text--truncate">Engine</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/engine/docs/">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/code11/engine" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_Kavk"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_gIbX colorModeToggle_PrcX"><button class="clean-btn toggleButton_VDj2 toggleButtonDisabled_ZeuI" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_Tbgv"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_udUX"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_riID"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_sBtQ"><div class="docsWrapper_B_rJ"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_Xm1t" type="button"></button><div class="docRoot_oqNq"><aside class="theme-doc-sidebar-container docSidebarContainer_PzDB"><div class="sidebarViewport_qqv5"><div class="sidebar_DOKt"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_muOC"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/engine/docs/">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/engine/docs/getting-started">Getting started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/engine/docs/tutorials/react/setup">Tutorial</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/engine/docs/best-practices">Best Practices</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/engine/docs/concepts/state">Concepts</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/engine/docs/concepts/state">State</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/engine/docs/concepts/path-composition">Path Composition</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/engine/docs/patterns/aggregate">Patterns</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/engine/docs/testing">Testing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/engine/docs/modules/engine">Modules</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/engine/docs/packages/cli">Packages</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/engine/docs/api/engine">API Reference</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/engine/docs/api/engine">engine</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/engine/docs/api/producer">producer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/engine/docs/api/view">view</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/engine/docs/api/observe">observe</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/engine/docs/api/get">get</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/engine/docs/api/update">update</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/engine/docs/api/prop">prop</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/engine/docs/api/arg">arg</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/engine/docs/api/param">param</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/engine/docs/api/wildcard">wildcard</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/engine/docs/api/path">path</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_pSAL"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_IWlB"><div class="docItemContainer_gNqK"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer__QZX" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/engine/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_pH_b"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Concepts</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Testing</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_mlYn theme-doc-toc-mobile tocMobile_RTpq"><button type="button" class="clean-btn tocCollapsibleButton_irLx">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Testing</h1></header><p>Engine gives a lot of emphasis to building testable applications. Recommended
way to test Engine applications is using <code>@c11/engine.test</code> package, which can
be installed like any other npm package.</p>
<div class="language-sh codeBlockContainer_FXmE theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_NcA3"><pre tabindex="0" class="prism-code language-sh codeBlock_wBZe thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_p6xL"><span class="token-line" style="color:#bfc7d5"><span class="token plain">npm install -D @c11/engine.test jest</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">yarn add -D @c11/engine.test jest</span><br></span></code></pre><div class="buttonGroup_s_QN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_vvXQ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_uPqy"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xPJz"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>@c11/engine.test</code> provides utilities for writing tests which can be used with
the <a href="https://jestjs.io/" target="_blank" rel="noopener noreferrer">jest</a> testing framework. Jest is the only Engine supported
testing framework for now.</p>
<p>Engine applications are combinations of <a href="/engine/docs/api/view">views</a> and
<a href="/engine/docs/api/producer">producers</a>. Naturally, unit testing Engine applications is
achieved by writing unit tests for its <code>producer</code>s and <code>view</code>s.</p>
<div class="language-ts codeBlockContainer_FXmE theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_NcA3"><pre tabindex="0" class="prism-code language-ts codeBlock_wBZe thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_p6xL"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> Test </span><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;@c11/engine.test&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup_s_QN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_vvXQ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_uPqy"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xPJz"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Like rest of Engine ecosystem, API exposed by <code>@c11/engine.test</code> is also quite
minimal. Default export from <code>@c11/engine.test</code> has just 2 properties which can
be used to test <a href="/engine/docs/api/producer">producer</a>s and <a href="/engine/docs/api/view">view</a>s.</p>
<h2 class="anchor anchorWithStickyNavbar_dPbw" id="testing-producers">Testing <code>producer</code>s<a href="#testing-producers" class="hash-link" aria-label="Direct link to testing-producers" title="Direct link to testing-producers">​</a></h2>
<p>Engine <code>producer</code>s are just Javascript functions. Testing them boils down to
same rules that apply to testing functions. Only catch is the fact that it is
not possible to call producers directly. They are executed by
<a href="/engine/docs/api/engine">Engine</a> automatically when something interesting in state
changes. <code>Test.producer</code> is a convenience function which works around this
catch, and makes testing a breeze.</p>
<h3 class="anchor anchorWithStickyNavbar_dPbw" id="testproducer"><code>Test.producer</code><a href="#testproducer" class="hash-link" aria-label="Direct link to testproducer" title="Direct link to testproducer">​</a></h3>
<p><code>Test.producer</code> is a replacement for
<a href="https://jestjs.io/docs/en/api#testname-fn-timeout" target="_blank" rel="noopener noreferrer">test/it</a> calls. A call to
<code>Test.producer</code> tests a single attribute (or function call) of a producer,
making a single test case for a producer&#x27;s test suite. For example, here&#x27;s what
a test suite for a producer with single test looks like:</p>
<div class="language-ts codeBlockContainer_FXmE theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_NcA3"><pre tabindex="0" class="prism-code language-ts codeBlock_wBZe thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_p6xL"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">describe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;editListItem&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Test</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">producer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Guard action doesn&#x27;t exist&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    producer</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> editListItem</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    values</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    expectations</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      resetAction</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        set</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      updateMode</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        set</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup_s_QN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_vvXQ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_uPqy"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xPJz"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Unlike <a href="https://jestjs.io/docs/en/api#testname-fn-timeout" target="_blank" rel="noopener noreferrer">test/it</a>,
<code>Test.producer</code> don&#x27;t take a function where arbitrary logic and assertions can
go. <code>Test.producer</code> takes an object as its argument, which has following properties:</p>
<ul>
<li>
<p><strong><code>producer: producer</code></strong></p>
<p>The <a href="/engine/docs/api/producer">producer</a> function which you want to test.</p>
</li>
<li>
<p><strong><code>values: object</code></strong></p>
<p><code>values</code> is an object that represent the first argument of the producer. We
can&#x27;t call the producer directly to test it, <code>values</code> is how we:</p>
<ol>
<li>Provide arguments which producer gets from state (e.g using <code>Observe.&lt;path&gt;</code>)</li>
<li>Provide mocks for functions and other abstractions the producer uses</li>
</ol>
<p>When the test is executed, the producer will get called with these <code>values</code> as
argument.</p>
</li>
<li>
<p><strong><code>expectations: { set: object, merge: object, remove: object }</code></strong></p>
<p>Expectations is an object to declare our the behavior of our expectations in a
declarative manner. Unlike traditional jest tests, we can&#x27;t make arbitrary
assertions in our tests to ensure our producer behaves. <code>expectations</code> is an
object with three properties which can assert three ways in which a producer
can impact the state:</p>
<ul>
<li><strong><code>set: object</code></strong> asserts new values that producer adds to state</li>
<li><strong><code>merge: object</code></strong> asserts changes in existing values in state that
producer has introduced</li>
<li><strong><code>remove: object</code></strong> asserts values that producer has removed from the state</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_dPbw" id="testing-views">Testing <code>view</code>s<a href="#testing-views" class="hash-link" aria-label="Direct link to testing-views" title="Direct link to testing-views">​</a></h2>
<p>Engine&#x27;s <code>view</code>s are just producers with a significant specialty: they return
JSX which gets rendered in, well, a view. <code>@c11/engine.test</code> support testing
views with <code>Test.view</code> function. For now, only <a href="https://jestjs.io/docs/en/snapshot-testing" target="_blank" rel="noopener noreferrer">snapshot
testing</a> is supported to test views.</p>
<h3 class="anchor anchorWithStickyNavbar_dPbw" id="testview"><strong><code>Test.view</code></strong><a href="#testview" class="hash-link" aria-label="Direct link to testview" title="Direct link to testview">​</a></h3>
<p>Similar to <code>Test.producer</code>, <code>Test.view</code> is how individual tests of a
<a href="/engine/docs/api/view">view</a>&#x27;s test suite are written.</p>
<p>Here&#x27;s what a simple test for a view looks like:</p>
<div class="language-ts codeBlockContainer_FXmE theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_NcA3"><pre tabindex="0" class="prism-code language-ts codeBlock_wBZe thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_p6xL"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">describe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;TodoList view&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Test</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">view</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;no list&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    state</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      todo</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        byId</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    View</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> TodoList</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    props</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> icons</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup_s_QN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_vvXQ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_uPqy"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_xPJz"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Just like <code>Test.producer</code>, <code>Test.view</code> do not accept a function for its second
argument but an object to declare the test in a declarative manner.</p>
<ul>
<li>
<p><strong><code>state: Object</code></strong></p>
<p><code>state</code> is the application state at the time when view is first rendered.
Testing a view need access to the whole state because:</p>
<ol>
<li>Child views might be accessing this state directly</li>
<li>Producers attached to the view (or its child views) might make changes to
the application state, which in turn impact the view</li>
</ol>
</li>
<li>
<p><strong><code>View: view</code></strong></p>
<p><code>View</code> is the view itself that the test is being written for.</p>
</li>
<li>
<p><strong><code>props: object</code></strong></p>
<p><code>props</code> is an object of props that parent view has passed down.</p>
</li>
</ul>
<p>This is all that is needed to test an Engine view. A call to <code>Test.view</code> will
take a snapshot of how the view looks like when rendered in browser, and match
it with the previously taken snapshot to ensure nothing has broken the view. You
can read more about <a href="https://jestjs.io/docs/en/snapshot-testing" target="_blank" rel="noopener noreferrer">snapshot testing on Jest&#x27;s
documentation</a>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/code11/engine/edit/master/docs/docs/testing.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_pwv9" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_Qult"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/engine/docs/patterns/triggers"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Triggers</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/engine/docs/modules/engine"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Modules</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_Og8W thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#testing-producers" class="table-of-contents__link toc-highlight">Testing <code>producer</code>s</a><ul><li><a href="#testproducer" class="table-of-contents__link toc-highlight"><code>Test.producer</code></a></li></ul></li><li><a href="#testing-views" class="table-of-contents__link toc-highlight">Testing <code>view</code>s</a><ul><li><a href="#testview" class="table-of-contents__link toc-highlight"><strong><code>Test.view</code></strong></a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 <span>Code<sup>11</sup></span>, Inc. Built with <span>Docusaurus</span>.</div></div></div></footer></div>
</body>
</html>